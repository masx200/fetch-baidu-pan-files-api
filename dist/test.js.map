{"version":3,"file":"test.js","sources":["../lib/files.ts","../lib/generatelogid.ts","../lib/limitfetch.ts","../lib/init.ts","../lib/objtostrcookie.ts","../lib/gethomehtmlandupdatecookie.ts","../lib/savecookies.ts","../lib/PANENV.ts","../test/initENV.ts","../lib/errno.ts","../lib/fatalerrorcheck.ts","../lib/response-error-handler.ts","../lib/listdirpage.ts","../lib/fetchlistdir.ts","../lib/taskquerydeleteonce.ts","../test/list-dir.ts","../lib/fetch-task-query-delete.ts","../lib/fetchdeletetaskid.ts","../lib/fetch-delete-files.ts","../test/test-delete.ts","../lib/index.ts","../test/query-task.ts","../test/update-cookie.ts"],"sourcesContent":["import os from \"os\";\nimport path from \"path\";\n// import { fileURLToPath } from \"url\";\n// const __filename = fileURLToPath(import.meta.url);\n// const __dirname = dirname(__filename);\nconst datadirname = path.join(os.homedir(), \"baidupan\", \"./userdata\");\nconst bdstokenfile = path.resolve(datadirname, \"./bdstoken.txt\");\nconst jsonfile = path.resolve(datadirname, \"./cookies.json\");\n\nexport { jsonfile, bdstokenfile };\n","//https://pan.baidu.com/box-static/disk-system/js/prefetch.js?t=1582036131654\nimport btoa from \"btoa\";\nconst d = btoa;\nconst r = String.fromCharCode;\n// const n =\n//     \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/~！@#￥%……&\";\nconst a = function (e: string) {\n    if (e.length < 2) {\n        var t = e.charCodeAt(0);\n        return 128 > t\n            ? e\n            : 2048 > t\n            ? r(192 | (t >>> 6)) + r(128 | (63 & t))\n            : r(224 | ((t >>> 12) & 15)) +\n              r(128 | ((t >>> 6) & 63)) +\n              r(128 | (63 & t));\n    } else {\n        let t =\n            65536 +\n            1024 * (e.charCodeAt(0) - 55296) +\n            (e.charCodeAt(1) - 56320);\n        return (\n            r(240 | ((t >>> 18) & 7)) +\n            r(128 | ((t >>> 12) & 63)) +\n            r(128 | ((t >>> 6) & 63)) +\n            r(128 | (63 & t))\n        );\n    }\n};\nconst o = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n// const d = function(e) {\n//     return e.replace(/[\\s\\S]{1,3}/g, i);\n// };\nconst l = function () {\n    return d(c(new Date().getTime()));\n};\n// const i = function(e) {\n//     var t = [0, 2, 1][e.length % 3],\n//         r =\n//             (e.charCodeAt(0) << 16) |\n//             ((e.length > 1 ? e.charCodeAt(1) : 0) << 8) |\n//             (e.length > 2 ? e.charCodeAt(2) : 0),\n//         a = [\n//             n.charAt(r >>> 18),\n//             n.charAt((r >>> 12) & 63),\n//             t >= 2 ? \"=\" : n.charAt((r >>> 6) & 63),\n//             t >= 1 ? \"=\" : n.charAt(63 & r)\n//         ];\n//     return a.join(\"\");\n// };\nconst c = function (e: number) {\n    return (String(e) + \"\" + Math.random()).replace(o, a);\n};\nexport function generatelogid() {\n    return l();\n}\n","import currentlimiter from \"@masx200/async-task-current-limiter\";\nimport https from \"https\";\nimport fetch from \"node-fetch\";\nimport assert from \"assert\";\nconst fetchlimiter = currentlimiter(15);\nconst agent = new https.Agent({\n    keepAlive: true,\n});\nhttps.globalAgent = agent;\n\nconst customfetch = function (\n    url: string,\n    opt: RequestInit = {}\n): Promise<Response> {\n    // @ts-ignore\n    opt = Object.assign(\n        { agent: url.startsWith(\"https:\") ? agent : undefined },\n        opt\n    );\n\n    onrequest(url, opt);\n    // const req = new fetch.Request(url, opt);\n    //@ts-ignore\n    return fetch(url, opt) as Response;\n};\n\nconst limitedfetch = fetchlimiter.asyncwrap(customfetch);\nexport { limitedfetch as fetch };\nfunction onrequest(url: string, opt: RequestInit = {}) {\n    const { method = \"GET\", /*headers = {}, */ body } = opt;\n    console.log(\"request\", method, url, /* headers,*/ body);\n}\nexport async function fetchresjson(url: string, opt: RequestInit = {}) {\n    const method = opt.method || \"GET\";\n    const response = await limitedfetch(url, opt);\n    if (!response.ok) {\n        throw Error(\n            \"fetch failed \\n\" +\n                \" \" +\n                method +\n                \" \" +\n                url +\n                \" \\n\" +\n                response.status +\n                \" \" +\n                response.statusText\n        );\n    }\n    const resbody = await response.json();\n    onresponse(resbody);\n    return resbody;\n}\nfunction onresponse(data: any) {\n    assert(data && typeof data === \"object\");\n    const errno = data?.errno;\n\n    if (errno !== 0) {\n        console.error(\"response data error\", data);\n    }\n}\n","import fsextra from \"fs-extra\";\nimport { bdstokenfile } from \"./files.js\";\nexport async function getbdstoken() {\n    return String(await fsextra.readFile(bdstokenfile));\n}\n// import { gethomehtmlandupdatecookie } from \"./gethomehtmlandupdatecookie.js\";\nexport const homeurl = `https://pan.baidu.com/disk/home`;\n// export async function getbdstokenanduser(): Promise<string> {\n//     const homehtml = await gethomehtmlandupdatecookie();\n//     // console.log(homehtml);\n//     return parsehtmlstoken(homehtml);\n// }\n\n/* bdstoken获取方式发生改变了\n2020年6月6日\n*/\n// function parsehtmlstoken(html: string): string {\n//     // text=`initPrefetch('dd1601843e05e55609ed49d51dabba42', 'masx20');`\n//     const reg = /\"bdstoken\":\"(.+)\",\"is_vip\"/g;\n//     const RegExpExecArray = reg.exec(html);\n//     if (RegExpExecArray) {\n//         const [, bdstoken] = RegExpExecArray;\n//         // console.log([raw, bdstoken, user]);\n//         return bdstoken;\n//     }\n//     throw Error(\"failed parse bdstoken :\" + html);\n// }\n// fetch(\"https://pan.baidu.com/disk/home?\", {\n//   \"headers\": {\n//     \"accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\n//     \"accept-language\": \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n//     \"cache-control\": \"max-age=0\",\n//     \"sec-fetch-dest\": \"document\",\n//     \"sec-fetch-mode\": \"navigate\",\n//     \"sec-fetch-site\": \"same-origin\",\n//     \"sec-fetch-user\": \"?1\",\n//     \"upgrade-insecure-requests\": \"1\",\n//     \"cookie\": \"BAIDUID=FB4E6D238362ED1ED4E544B9850BEDC0:FG=1; BIDUPSID=FB4E6D238362ED1ED4E544B9850BEDC0; PSTM=1549849081; PANWEB=1; BDUSS=XBzT1B4MVBGVlU2Sjc5d1lKb34zSmx5VnpQTHlZN09OcFV0Q0h2b1V1YW5XeVZlSVFBQUFBJCQAAAAAAAAAAAEAAADPRYIEbWFzeDIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKfO~V2nzv1dY; STOKEN=e8edfa007b1d000fb1531ec76617ec0b95b615575fbacc337788e78925bfcd4f; SCRC=72ccb728ee6dacf2ba5938fd8d1351ca; cflag=13%3A3; Hm_lvt_7a3960b6f067eb0085b7f96ff5e660b0=1582435770,1582439059,1582458059,1582507482; Hm_lpvt_7a3960b6f067eb0085b7f96ff5e660b0=1582507482; PANPSC=17104741590485773119%3AKkwrx6t0uHDoTFmRfJVxoMJKt428qvGu%2B%2FtD9xp6N5gr2wqYbSNJzAjY5VzUlGl4V4y6jLL5Rb3KGWKyBagKrmlUQ2zB5GaPDtTCc6ZqWjGu2cUHmw770eVcjWJ40Swp0v29HoOyBxO7W09FU%2BvrLt8NRd7EA5d%2B2fNZfjs7wBY%2FcoIBUQpA2juoAeCl9TBG\"\n//   },\n//   \"referrer\": \"https://pan.baidu.com/disk/home?\",\n//   \"referrerPolicy\": \"no-referrer-when-downgrade\",\n//   \"body\": null,\n//   \"method\": \"GET\",\n//   \"mode\": \"cors\"\n// });\n// /* GET /disk/home HTTP/1.1\n// Host: pan.baidu.com\n// Connection: keep-alive\n// accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\n// cache-control: max-age=0\n// accept-language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\n// upgrade-insecure-requests: 1\n// User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.17 Safari/537.36 Edg/81.0.416.12\n// Sec-Fetch-Site: same-origin\n// Sec-Fetch-Mode: cors\n// Sec-Fetch-Dest: empty\n// Referer: https://pan.baidu.com/disk/home?\n// Accept-Encoding: gzip, deflate, br\n// Cookie: BAIDUID=FB4E6D238362ED1ED4E544B9850BEDC0:FG=1; BIDUPSID=FB4E6D238362ED1ED4E544B9850BEDC0; PSTM=1549849081; PANWEB=1; BDUSS=XBzT1B4MVBGVlU2Sjc5d1lKb34zSmx5VnpQTHlZN09OcFV0Q0h2b1V1YW5XeVZlSVFBQUFBJCQAAAAAAAAAAAEAAADPRYIEbWFzeDIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKfO~V2nzv1dY; STOKEN=e8edfa007b1d000fb1531ec76617ec0b95b615575fbacc337788e78925bfcd4f; SCRC=72ccb728ee6dacf2ba5938fd8d1351ca; cflag=13%3A3; Hm_lvt_7a3960b6f067eb0085b7f96ff5e660b0=1582435770,1582439059,1582458059,1582507482; Hm_lpvt_7a3960b6f067eb0085b7f96ff5e660b0=1582508457; PANPSC=6808505982233591071%3AZdTG9lVgpnuetahVhw%2BA5lcS2d9ns3O5vd9dRSgT3onjD5%2FhM08MsSpPymoB8yIZOD8tuTtuXwKv%2FNj2q7IDPOKiycrkhrnWQjQ1mFHTd8V1tt%2Bk9Cane%2BomA%2FKeZTApdS8c7ndIzLEQUHeSSbUhhWzQAWXtbqM%2BhgUHpi7vcen7%2B0P3Gno3mFO4o7rVV8Q%2B7e7bgMsDOU6SsVZaqyA8TA%3D%3D */\n","import cookie from \"cookie\";\nexport function objtostrcookie(panobj: Record<string, string>) {\n    return Object.entries(panobj)\n        .map(([key, value]) => {\n            return cookie.serialize(key, String(value));\n        })\n        .join(\";\");\n}\n","import fsextra from \"fs-extra\";\nimport { jsonfile } from \"./files.js\";\nimport { fetch } from \"./limitfetch.js\";\nimport { homeurl } from \"./init.js\";\nimport { objtostrcookie } from \"./objtostrcookie.js\";\nimport { savecookies } from \"./savecookies.js\";\nexport async function gethomehtmlandupdatecookie(): Promise<string> {\n    if (!fsextra.existsSync(jsonfile)) {\n        throw Error(\"没有找到cookie文件,请先登陆网盘,并保存 cookie\");\n    }\n    const panobj = await fsextra.readJSON(jsonfile);\n    const coostr = objtostrcookie(panobj);\n    const req = await fetch(homeurl, {\n        headers: {\n            \"Accept-Encoding\": ` gzip, deflate, br`,\n            \"User-Agent\": `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.17 Safari/537.36 Edg/81.0.416.12`,\n            Connection: `keep-alive`,\n            Host: `pan.baidu.com`,\n            accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\n            \"accept-language\":\n                \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n            \"cache-control\": \"max-age=0\",\n            \"sec-fetch-dest\": \"document\",\n            \"sec-fetch-mode\": \"navigate\",\n            \"sec-fetch-site\": \"same-origin\",\n            \"sec-fetch-user\": \"?1\",\n            \"upgrade-insecure-requests\": \"1\",\n            cookie: coostr,\n            Referer: \"https://pan.baidu.com/disk/home?\",\n        },\n        body: undefined,\n        method: \"GET\",\n    });\n    if (req.ok) {\n        // console.log(req.headers);\n        const setcookie = req.headers.get(\"set-cookie\");\n        if (setcookie) {\n            // console.log(setcookie);\n            await savecookies(setcookie);\n        }\n        return req.text();\n    } else {\n        throw Error(\n            \"fetch failed \\n\" +\n                homeurl +\n                \" \\n\" +\n                req.status +\n                \" \" +\n                req.statusText\n        );\n    }\n}\n","import cookie from \"cookie\";\nimport fsextra from \"fs-extra\";\nimport { jsonfile } from \"./files.js\";\nexport async function savecookies(setcookie: string) {\n    const cooobj = {};\n    //可能有多个set-cookie\n    setcookie\n        .split(\",\")\n        .map((s) => s.split(\";\"))\n        .flat()\n        .forEach((coo) => Object.assign(cooobj, cookie.parse(coo)));\n    const panobj = await fsextra.readJSON(jsonfile);\n    const outputcoo = { ...panobj, ...cooobj };\n    Reflect.deleteProperty(outputcoo, \"expires\");\n    Reflect.deleteProperty(outputcoo, \"domain\");\n    Reflect.deleteProperty(outputcoo, \"path\");\n    console.log(outputcoo);\n    await fsextra.writeJSON(jsonfile, outputcoo, { spaces: 4 });\n}\n","import fsextra from \"fs-extra\";\nimport { jsonfile } from \"./files.js\";\nimport { generatelogid } from \"./generatelogid.js\";\nimport { gethomehtmlandupdatecookie } from \"./gethomehtmlandupdatecookie.js\";\nimport { getbdstoken } from \"./init.js\";\n// import { getbdstokenanduser } from \"./init.js\";\nimport { objtostrcookie } from \"./objtostrcookie.js\";\nexport interface PANENV {\n    logid: string;\n    bdstoken: string;\n    // user: string;\n    cookie: string;\n}\nlet cacheenv: Promise<PANENV> | undefined;\nlet resolve: {\n    (arg0: PANENV): void;\n    (value?: PANENV | PromiseLike<PANENV> | undefined): void;\n} = (result: any) => {};\nlet rejecet: (reason: any) => void = (reason: any) => {};\nexport async function initPANENV(): Promise<PANENV> {\n    if (cacheenv) {\n        return cacheenv;\n    } else {\n        cacheenv = new Promise((res, rej) => {\n            //@ts-ignore\n            resolve = res;\n            rejecet = rej;\n        });\n    }\n    try {\n        await gethomehtmlandupdatecookie();\n        const bdstoken = await getbdstoken();\n        const panobj = await fsextra.readJSON(jsonfile);\n        const coostr = objtostrcookie(panobj);\n        const panenv: PANENV = {\n            logid: generatelogid(),\n            bdstoken: bdstoken,\n            // user: user,\n            cookie: coostr,\n        };\n        // cacheenv = panenv;\n        console.log(panenv);\n        resolve(panenv);\n        return panenv;\n    } catch (error) {\n        rejecet(error);\n        return Promise.reject(error);\n    }\n\n    // return cacheenv;\n}\n/*  UnhandledPromiseRejectionWarning: SyntaxError: C:\\Users\\ma\\baidupan\\userdata\\cookies.json: Unexpected end of JSON input\n    at JSON.parse (<anonymous>)\n    at D:\\Documents\\GitHub\\fetch-baidu-pan-files\\node_modules\\jsonfile\\index.js:33:18\n    at D:\\Documents\\GitHub\\fetch-baidu-pan-files\\node_modules\\graceful-fs\\graceful-fs.js:123:16\n    at FSReqCallback.readFileAfterClose [as oncomplete] (internal/fs/read_file_context.js:63:3) */\n","import { initPANENV } from \"../lib/PANENV\";\nprocess.on(\"unhandledRejection\", (err) => {\n    throw err;\n});\nArray(5)\n    .fill(undefined)\n    .forEach(() => {\n        initPANENV().then(console.log);\n    });\n","// https://pan.baidu.com/box-static/disk-system/pkg/common-chunks-all_2ebbd52.js:formatted\nvar a = \"//yun.baidu.com/buy/center?tag=8&from=\" + \"disk-home\";\nvar d = \"购买容量\";\nvar t =\n    '你的空间不足了哟，赶紧<a target=\"_blank\" href=\"' + a + '\">' + d + \"</a>吧\";\nexport default {\n    0: \"成功\",\n    \"-1\": \"用户名和密码验证失败\",\n    \"-2\": \"备用\",\n    \"-3\": \"用户未激活（调用init接口）\",\n    \"-4\": \"COOKIE中未找到host_key&user_key（或BDUSS）\",\n    \"-5\": \"host_key和user_key无效\",\n    \"-6\": '登录失败，请重新<a href=\"javascript:window.location.reload();\">登录</a>',\n    \"-7\": \"文件或目录名错误或无权访问\",\n    \"-8\": \"该目录下已存在此文件\",\n    \"-9\": \"文件被所有者删除，操作失败\",\n    \"-10\": t,\n    \"-11\": \"父目录不存在\",\n    \"-12\": \"设备尚未注册\",\n    \"-13\": \"设备已经被绑定\",\n    \"-14\": \"帐号已经初始化\",\n    \"-19\": \"请输入验证码\",\n    \"-21\": \"预置文件无法进行相关操作\",\n    \"-22\": \"被分享的文件无法重命名，移动等操作\",\n    \"-23\": \"数据库操作失败，请联系netdisk管理员\",\n    \"-24\": \"要取消的文件列表中含有不允许取消public的文件。\",\n    \"-25\": \"非公测用户\",\n    \"-26\": \"邀请码失效\",\n    \"-32\": t,\n    \"-102\": \"云冲印文件7日内无法删除\",\n    1: \"服务器错误 \",\n    2: \"接口请求错误，请稍候重试\",\n    3: \"一次操作文件不可超过100个\",\n    4: \"新文件名错误\",\n    5: \"目标目录非法\",\n    6: \"备用\",\n    7: \"NS非法或无权访问\",\n    8: \"ID非法或无权访问\",\n    9: \"申请key失败\",\n    10: \"创建文件的superfile失败\",\n    11: \"user_id(或user_name)非法或不存在\",\n    12: \"部分文件已存在于目标文件夹中\",\n    13: \"此目录无法共享\",\n    14: \"系统错误\",\n    15: \"操作失败\",\n    102: \"无权限操作该目录\",\n    103: \"提取码错误\",\n    104: \"验证cookie无效\",\n    111: \"当前还有未完成的任务，需完成后才能操作\",\n    112: '页面已过期，请<a href=\"javascript:window.location.reload();\">刷新</a>后重试',\n    121: \"网盘文件过多，请删至500万个以内再试\",\n    132: \"删除文件需要验证您的身份\",\n    141: \"内部错误\",\n    142: \"您已被移出当前共享目录，无法继续操作\",\n    201: \"系统错误\",\n    202: \"系统错误\",\n    203: \"系统错误\",\n    204: \"系统错误\",\n    205: \"系统错误\",\n    301: \"其他请求出错\",\n    501: \"获取的LIST格式非法\",\n    618: \"请求curl返回失败\",\n    619: \"pcs返回错误码\",\n    600: \"json解析出错\",\n    601: \"exception抛出异常\",\n    617: \"getFilelist其他错误\",\n    211: \"无权操作或被封禁\",\n    404: \"秒传md5不匹配 rapidupload 错误码\",\n    406: \"秒传创建文件失败 rapidupload 错误码\",\n    407: \"fileModify接口返回错误，未返回requestid rapidupload 错误码\",\n    1024: \"云冲印购物车文件15日内无法删除\",\n    31080: \"我们的服务器出错了，稍候试试吧\",\n    31021: \"网络连接失败，请检查网络或稍候再试\",\n    31075: \"一次支持操作999个，减点试试吧\",\n    31116: '你的空间不足了哟，赶紧<a href=\"//yun.baidu.com/buy/center?tag=2&from=multi-file\">购买空间</a>吧',\n    31401: \"移动后，所选文件将被取消共享，原成员将无法查看，是否继续？\",\n    31034: \"操作过于频繁，请稍后再试\",\n    36009: \"用户空间不足\",\n    36010: \"文件不存在\",\n    36012: \"操作超时，请重试\",\n    36013: \"同时下载的任务过多，不能下载\",\n    36014: \"存储路径已使用\",\n    36016: \"任务已删除\",\n    36017: \"任务已完成\",\n    36018: \"解析失败，种子文件损坏\",\n    36019: \"任务正在处理中\",\n    36020: \"任务地址不存在\",\n    36021: \"普通用户最多同时下载1个任务哦！马上开通离线下载套餐，立即下载更多！\",\n    36022: \"同时下载的任务过多，不能下载\",\n    36023: \"普通用户每月只能离线下载5个任务哦！马上开通离线下载套餐，立即下载更多！\",\n    36024: \"本月下载数已超限制\",\n    36025: \"分享链接已失效\",\n    36026: \"链接格式有误\",\n    36027: \"链接格式有误\",\n    36028: \"暂时无法找到相关种子信息\",\n    36031: \"网络繁忙，请稍候再试\",\n    36032: \"离线文件因含有违规内容被系统屏蔽无法下载\",\n    9000: \"请不要申诉正常文件！\",\n    9001: \"服务器开小差，请稍后重试\",\n    9002: \"申诉频率太快，请稍后再试\",\n    9100: '你的帐号存在违规行为，已被冻结，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    9200: '你的帐号存在违规行为，已被冻结，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    9300: '你的帐号存在违规行为，该功能暂被冻结，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    9400: '你的帐号异常，需验证后才能使用该功能，<a href=\"/disk/appeal\" target=\"_blank\">立即验证</a>',\n    9500: '你的帐号存在安全风险，已进入保护模式，请修改密码后使用，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    10013: \"当前还有未完成的任务，完成后才能操作\",\n    10014: \"未检测到可导入证件\",\n    10015: \"任务创建失败，请稍后重试\",\n    10016: \"抱歉，容量未领取成功，请重新添加证件领取\",\n    18201: \"创建共享目录失败： 有已共享的子目录\",\n    18202: \"创建共享目录失败： 有已共享的父目录\",\n    18203: \"创建共享目录失败： 超过最大创建共享目录限制\",\n    18204: \"超过最大接收共享目录限制\",\n    18205: \"共享目录群组已达上限\",\n    18207: \"为成员设置备注错误\",\n    18208: \"您已被移出该共享目录\",\n    18209: \"邀请链接失效\",\n    18210: \"共享目录不存在\",\n    18211: \"邀请链接已过期\",\n    18212: \"该目录已经被共享\",\n    18214: \"不能邀请目录拥有者\",\n    18215: \"您已加入该共享文件夹\",\n    18220: \"该共享目录目录已被冻结\",\n    18221: \"文件夹名称因含有敏感文字，无法共享给他人\",\n    18222: \"文件夹中因含有非法违规内容，无法共享给他人\",\n    10019: \"格式有误\",\n};\n","import 错误码表 from \"./errno.js\";\nfunction fatalerrorcheck(data: any) {\n    if (data?.errno === -6) {\n        const e = new Error(\n            \"response data error \\n\" +\n                JSON.stringify(data) +\n                \"\\n\" +\n                Reflect.get(错误码表, data?.errno)\n        );\n        console.error(e);\n        process.exit(1);\n    }\n}\nexport { fatalerrorcheck };\n","import 错误码表 from \"./errno.js\";\nimport assert from \"assert\";\nexport function response_error_handler(data: any, urlhref: string) {\n    assert(typeof data === \"object\" && data && !Array.isArray(data));\n\n    const errno = data?.errno;\n    assert(typeof errno === \"number\");\n\n    if (errno !== 0) {\n        console.error(\"response body error\", data);\n        throw Error(\n            \"response data error \\n\" +\n                urlhref +\n                \" \\n\" +\n                errno +\n                \" \" +\n                Reflect.get(错误码表, errno)\n        );\n    }\n}\n","import { fatalerrorcheck } from \"./fatalerrorcheck.js\";\nimport { listurl, numlimit } from \"./fetchlistdir.js\";\nimport { fetchresjson } from \"./limitfetch.js\";\nimport { initPANENV } from \"./PANENV.js\";\nimport { response_error_handler } from \"./response-error-handler.js\";\nimport { PANDIR } from \"./schemadir.js\";\nimport { PANFILE } from \"./schemafile.js\";\n/*function gettimestamp() {\n    return String(new Date().getTime());\n}*/\n/* 需要拆分1000个最多每次 */\nexport async function listdirpage(\n    dir: string,\n    page: number\n    // bdstoken: string,\n    // logid: string\n): Promise<Array<PANFILE | PANDIR>> {\n    const panenv = await initPANENV();\n    const params = {\n        order: \"time\",\n        desc: \"1\",\n        showempty: \"0\",\n        web: \"1\",\n        page: String(page),\n        dir: dir,\n        num: String(numlimit),\n        channel: \"chunlei\",\n        app_id: \"250528\",\n        bdstoken: panenv.bdstoken,\n        logid: panenv.logid,\n        clienttype: \"0\",\n    };\n    const headers = {\n        \"Accept-Encoding\": \"gzip, deflate, br\",\n        Referer: `https://pan.baidu.com/disk/home?`,\n        \"User-Agent\":\n            \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.17 Safari/537.36 Edg/81.0.416.12\",\n        Connection: \"keep-alive\",\n        Host: \"pan.baidu.com\",\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"accept-language\": \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n        cookie: panenv.cookie,\n    };\n    const listapi = new URL(listurl);\n    listapi.search = String(new URLSearchParams(params));\n    const urlhref = String(listapi);\n    try {\n        const data = await fetchresjson(urlhref, {\n            headers: headers,\n\n            body: undefined,\n            method: \"GET\",\n        });\n        fatalerrorcheck(data);\n        // if (req.ok) {\n        //     const data: any = await req.json();\n        const errno = data?.errno;\n        const listdata = data?.list;\n        /* 如果目录不存在则返回空数组 */\n        if (errno === -9) {\n            //  \"-9\": \"文件被所有者删除，操作失败\",\n            return [];\n        }\n        if (\n            typeof errno === \"number\" &&\n            errno === 0 &&\n            Array.isArray(listdata)\n        ) {\n            return listdata;\n        } else {\n            response_error_handler(data, urlhref);\n            return [];\n            /*   const errno = data.errno;\n                assert(typeof errno === \"number\");\n\n                throw Error(\n                    \"data error \\n\" +\n                        urlhref +\n                        \" \\n\" +\n                        errno +\n                        Reflect.get(错误码表, errno)\n                );*/\n        }\n        // } else {\n        //     throw Error(\n        //         \"fetch failed :\" +\n        //             urlhref +\n        //             \" \" +\n        //             req.status +\n        //             \" \" +\n        //             req.statusText\n        //     );\n        // }\n    } catch (e) {\n        console.error(\"获取文件列表错误,5秒后重试.\" + dir);\n        console.error(e);\n        await new Promise((r) => {\n            setTimeout(r, 5000);\n        });\n        return listdirpage(dir, page /* , bdstoken, logid */);\n    }\n}\n","// import fetch from \"node-fetch\";\nimport { PANDIR } from \"./schemadir.js\";\nimport { PANFILE } from \"./schemafile.js\";\nimport { listdirpage } from \"./listdirpage.js\";\nexport const listurl = `https://pan.baidu.com/api/list`;\n// export let coostr: string | undefined;\nexport const numlimit = 1000;\n\nexport async function listonedir(\n    dir: string\n    // bdstoken: string,\n    // logid: string\n): Promise<Array<PANFILE | PANDIR>> {\n    let page = 1;\n    const alldata: (PANFILE | PANDIR)[] = [];\n    while (true) {\n        const datalist: (PANFILE | PANDIR)[] = await listdirpage(dir, page);\n\n        alldata.push(...datalist);\n        if (datalist.length < numlimit) {\n            break;\n        }\n        page++;\n    }\n    return alldata;\n}\n","import { fatalerrorcheck } from \"./fatalerrorcheck.js\";\nimport { operationurl } from \"./fetch-task-query-delete.js\";\nimport { fetchresjson } from \"./limitfetch.js\";\nimport { initPANENV } from \"./PANENV.js\";\nimport { response_error_handler } from \"./response-error-handler.js\";\n/*\n\n{\"errno\":0,\"request_id\":4219930869770444291,\"task_errno\":4,\"status\":\"failed\",\"list\":[{\"error_code\":-7,\"path\":\"\\/apps\\/baidu_shurufa\\/\\u6211\\u7684\\u56fe\\u7247\\/20140920221912_Ic6M8KOEXM.jpg\"}]}\n\n*/\n// type status = \"running\" | \"success\" | \"pending\";\n\nexport async function taskquerydeleteonce(\n    taskid: number\n    // filelist: string[]\n): Promise<{\n    status: string;\n    progress: any;\n}> {\n    const panenv = await initPANENV();\n    const params = {\n        taskid: String(taskid),\n\n        channel: \"chunlei\",\n        web: \"1\",\n        app_id: \"250528\",\n        bdstoken: panenv.bdstoken,\n        logid: panenv.logid,\n        clienttype: \"0\",\n    };\n    try {\n        const listapi = new URL(operationurl);\n        listapi.search = String(new URLSearchParams(params));\n        const urlhref = String(listapi);\n        // const body = \"filelist=\" + encodeURIComponent(JSON.stringify(filelist));\n        //查询任务的状态不需要带上文件的路径\n        // const body = \"filelist=\" + encodeURIComponent(JSON.stringify([]));\n        /* 实测发现其实没有请求体都可以了,甚至使用get方法也可以了 */\n        const body = undefined;\n        /* 其实不带查询的文件路径也可以的 */\n        const headers = {\n            Host: \"pan.baidu.com\",\n            Connection: \"keep-alive\",\n\n            Accept: \"application/json, text/javascript, */*; q=0.01\",\n            \"X-Requested-With\": \"XMLHttpRequest\",\n            \"User-Agent\": `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.26 Safari/537.36 Edg/81.0.416.16`,\n            \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            Origin: \"https://pan.baidu.com\",\n            \"Sec-Fetch-Site\": \"same-origin\",\n            \"Sec-Fetch-Mode\": \"cors\",\n            \"Sec-Fetch-Dest\": \"empty\",\n            Referer: \" https://pan.baidu.com/disk/home?\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\":\n                \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n            Cookie: panenv.cookie,\n        };\n        const data = await fetchresjson(urlhref, {\n            method: \"POST\",\n            body,\n            headers,\n        });\n        fatalerrorcheck(data);\n        // if (req.ok) {\n        //     const data: any = await req.json();\n        const status = data?.status;\n        const progress = data?.progress;\n        if (data?.errno === 0 && typeof status === \"string\") {\n            return { status, progress };\n        } else {\n            response_error_handler(data, urlhref);\n            //@ts-ignore\n            return {};\n            /* const errno = data.errno;\n                assert(typeof errno === \"number\");\n\n                throw Error(\n                    \"data error \\n\" +\n                        urlhref +\n                        \" \\n\" +\n                        errno +\n                        Reflect.get(错误码表, errno)\n                );*/\n        }\n        // } else {\n        //     throw Error(\n        //         \"fetch failed :\" +\n        //             urlhref +\n        //             \" \" +\n        //             req.status +\n        //             \" \" +\n        //             req.statusText\n        //     );\n        // }\n    } catch (e) {\n        console.error(\"查询文件错误,5秒后重试.\");\n        console.error(e);\n        await new Promise((r) => {\n            setTimeout(r, 5000);\n        });\n        return taskquerydeleteonce(taskid /*  filelist */);\n    }\n}\n","import { listonedir } from \"../lib/fetchlistdir\";\nconst dirdata = listonedir(\"/\");\n// listonedir(\n//     `/!我的图片-20190604/微博美图合集-20191229/半次元cosplay频道/微博配图`\n// ).then(console.log);\ndirdata.then(console.log);\nlistonedir(`/我的图片`).then(console.log);\nprocess.on(\"unhandledRejection\", (err) => {\n    throw err;\n});\n","// import fetch from \"node-fetch\";\nimport { taskquerydeleteonce } from \"./taskquerydeleteonce.js\";\n\nexport const operationurl = `https://pan.baidu.com/share/taskquery`;\n/* 轮询任务状态 */\nexport async function taskquerydeletepoll(\n    taskid: number\n    // filelist: string[]\n): Promise<void> {\n    while (true) {\n        // console.log(\"开始查询任务状态\", taskid);\n        const { status, progress } = await taskquerydeleteonce(\n            taskid\n            // filelist\n        );\n        console.log(\"查询到任务状态成功\", taskid, status, progress);\n\n        // 任务完成后第一次是  \"success\",后面是 \"failed\"\n        if (status === \"success\" || status === \"failed\") {\n            // 可能是成功或失败\n            return;\n        } else {\n            await new Promise((r) => {\n                setTimeout(r, 5000);\n            });\n        }\n    }\n}\n","import { fatalerrorcheck } from \"./fatalerrorcheck.js\";\nimport { operationurl } from \"./fetch-delete-files.js\";\nimport { fetchresjson } from \"./limitfetch.js\";\nimport { initPANENV } from \"./PANENV.js\";\nimport { response_error_handler } from \"./response-error-handler.js\";\nexport async function fetchdeletetaskid(\n    filestoremove: string[]\n): Promise<number | undefined> {\n    if (!filestoremove.length) {\n        return;\n    }\n    const panenv = await initPANENV();\n    const params = {\n        async: \"2\",\n        opera: \"delete\",\n        // async: \"1\",\n        onnest: \"fail\",\n        channel: \"chunlei\",\n        web: \"1\",\n        app_id: \"250528\",\n        bdstoken: panenv.bdstoken,\n        logid: panenv.logid,\n        clienttype: \"0\",\n    };\n    try {\n        const listapi = new URL(operationurl);\n        listapi.search = String(new URLSearchParams(params));\n        const urlhref = String(listapi);\n        const body =\n            \"filelist=\" + encodeURIComponent(JSON.stringify(filestoremove));\n        const headers = {\n            Host: \"pan.baidu.com\",\n            Connection: \"keep-alive\",\n\n            Accept: \"application/json, text/javascript, */*; q=0.01\",\n            \"X-Requested-With\": \"XMLHttpRequest\",\n            \"User-Agent\": `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.26 Safari/537.36 Edg/81.0.416.16`,\n            \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            Origin: \"https://pan.baidu.com\",\n            \"Sec-Fetch-Site\": \"same-origin\",\n            \"Sec-Fetch-Mode\": \"cors\",\n            \"Sec-Fetch-Dest\": \"empty\",\n            Referer: \" https://pan.baidu.com/disk/home?\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\":\n                \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n            Cookie: panenv.cookie,\n        };\n        const data = await fetchresjson(urlhref, {\n            method: \"POST\",\n            body,\n            headers,\n        });\n        fatalerrorcheck(data);\n        // if (req.ok) {\n        // const data: any = await req.json();\n        const taskid = data?.taskid;\n        const info = data?.info;\n        if (data?.errno === 0 && typeof taskid === \"number\") {\n            return taskid;\n        } else if (data?.errno === 12 && Array.isArray(info)) {\n            const restfilestodel = new Set(filestoremove);\n\n            for (let file of info) {\n                let filepath = file?.path;\n                let errno = file?.errno;\n                if (errno === -9) {\n                    // 文件不存在的\n                    restfilestodel.delete(filepath);\n                }\n            }\n            const filelist = Array.from(restfilestodel);\n            if (!filelist.length) {\n                return;\n            }\n            return fetchdeletetaskid(filelist);\n        } else {\n            response_error_handler(data, urlhref);\n            return 0;\n            /* const errno = data.errno;\n                assert(typeof errno === \"number\");\nconsole.error(\"response body error\",data)\n                throw Error(\n                    \"data error \\n\" +\n                        urlhref +\n                        \" \\n\" +\n                        errno +\" \"+\n                        Reflect.get(错误码表, errno)\n                );*/\n        }\n        // } else {\n        //     throw Error(\n        //         \"fetch failed :\" +\n        //             urlhref +\n        //             \" \" +\n        //             req.status +\n        //             \" \" +\n        //             req.statusText\n        //     );\n        // }\n    } catch (e) {\n        console.error(\"删除文件错误,5秒后重试.\");\n        console.error(e);\n        await new Promise((r) => {\n            setTimeout(r, 5000);\n        });\n        return fetchdeletetaskid(filestoremove);\n    }\n}\n","import { posix } from \"path\";\nimport { taskquerydeletepoll } from \"./fetch-task-query-delete\";\nimport { listonedir } from \"./fetchlistdir\";\n// import fetch from \"node-fetch\";\n//一次删除操作的文件数量\nimport { fetchdeletetaskid } from \"./fetchdeletetaskid\";\n//一次删除的文件太多会失败\nconst listlimit = 200;\nconst splitlimit = 1600;\nexport async function deletefiles(rawfiles: Array<string>): Promise<void> {\n    if (!rawfiles.length) {\n        return;\n    }\n\n    //文件太多就拆分\n    if (rawfiles.length > splitlimit) {\n        const sliced = slicearray(rawfiles, splitlimit);\n        for (let filelist of sliced) {\n            await deletefiles(filelist);\n        }\n    }\n    /* 先获取文件列表 */\n    const filestoremove = await excludenotexistfiles(rawfiles);\n    console.log(\"需要删除的文件\", filestoremove);\n    /* 如果没有需要删除的文件,则不需要执行 */\n    if (filestoremove.length) {\n        await slicedelete(filestoremove);\n    } else {\n        console.log(\"没有需要删除的文件\");\n    }\n}\nexport const operationurl = `https://pan.baidu.com/api/filemanager`;\n/* 每次不能太多2000个1000个500个 */\nfunction slicearray<T>(data: Array<T>, count: number): Array<T>[] {\n    var result = [];\n    for (var i = 0; i < data.length; i += count) {\n        result.push(data.slice(i, i + count));\n    }\n    return result;\n}\nasync function excludenotexistfiles(\n    rawfiles: Array<string>\n): Promise<Array<string>> {\n    const filedirs = Array.from(new Set(rawfiles.map((f) => posix.dirname(f))));\n    console.log(\"获取文件信息\", filedirs);\n    const filepool: string[] = (\n        await Promise.all(\n            filedirs.map(async (f) => {\n                return (await listonedir(f))\n                    .filter((o) => !o.isdir)\n                    .map((o) => o.path);\n            })\n        )\n    )\n        //@ts-ignore\n        .flat();\n\n    /* 先把不存在的文件从删除列表中去除 */\n    const filestoremove = rawfiles.filter((f) => {\n        return filepool.includes(f);\n    });\n\n    return filestoremove;\n}\n\nasync function slicedelete(filestoremove: string[]): Promise<void> {\n    if (!filestoremove.length) {\n        return;\n    }\n\n    const sliced = slicearray(filestoremove, listlimit);\n    // return await sliced.reduce(async (prev, filelist) => {\n    // await prev;\n    for (let filelist of sliced) {\n        await deletetaskquerypoll(filelist);\n    }\n    ///* const taskid = await fetchdeletetaskid(filelist);\n\n    //   if (!taskid) {\n    //      return;\n    //   }\n    //  console.log(\"获取到删除的任务id\", taskid);\n    //  await taskquerydeletepoll(taskid /*  filelist */);\n    //   console.log(\"删除文件成功\", filelist);*/\n\n    // }, Promise.resolve());\n}\nasync function deletetaskquerypoll(filelist: string[]) {\n    const taskid = await fetchdeletetaskid(filelist);\n\n    if (!taskid) {\n        return;\n    }\n    console.log(\"获取到删除的任务id\", taskid);\n    await taskquerydeletepoll(taskid /*  filelist */);\n    console.log(\"删除文件成功\", filelist);\n}\n/* 12 部分文件已存在于目标文件夹中 */\n\n/* {\n  errno: 12,\n  info: [\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/4898c885e112644d2274d5298b0ac269.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/202b188ce11041619835c64fcb032953.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月18日/Rainight魈雨/微博配图/微博配图/99ab34c8e11730409fd1385aeecf2655.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/ce28dcf6e11661650c9559511269c206.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/9d5d5667e116abba141ece5930b54363.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/2004ce03e114206003380de3bc5f9e99.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/6df5977ae11486e08df6e5083c8201df.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/0c86bec6e11b747d3b5abdb1feadba64.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/6bad4e82e11a0237604d0146f8bea0de.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/9fa36d05e11ff046786c40e24ab61687.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/503e0a12e11ded3374719fc9b6952964.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/1bb94bf4e1637482869e21b66a044e94.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/5aebf0ace16304da2c031db50660c5a4.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/3bb5394fe1638521fca7531d876cd741.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/1724dca4e163bfb400ba0d532bf6df66.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/6cc377f7e16251ff341f02b6d554a3e7.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/c1c9bd56e162ee7906518861065f60a9.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/bdfa97bce1615c663dfee56ac93571e9.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/262a59a2e1678d81ad45526da9e40dd8.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/a9e63b0ce166ab518a57c5ace9d3d317.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/6218399ce165c4d3e3389ce901d6155b.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/2f7073c2e1644e547d941122fcd2b107.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月18日/Rainight魈雨/微博配图/微博配图/74130a05e164481063455bcb92a717ab.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/b8ce0097e16aa584f730e4362f3b0c09.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/88ea8ca3e16939a41200647c4d5e9b58.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/05479ac5e16856c796424cb213a534de.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/28b799f5e168dea8242220414bdb7627.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/9b2eac98e16cef3ecc8c64bda3276324.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/91e29fc2e17367a0da88dfe7cd5de1fc.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/ae7d5449e1730d7e9ba45be79781caf5.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/0da3aff5e171fbef4434580c58926d1b.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/cfa7e903e1774d3b086e65c99977a3a6.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/aff89cf9e177c1e23b5ea8b7790a76f0.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/85df483ee177ec5d1b6d99bdd64b5391.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/26f84497e177ef87e5284e43c6a2b06f.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/bcce543ce176d8272d1b1b3c292dc185.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/6a339e22e174d7608a743e69f79c575d.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/2061fdebe17b8cb48e3f372ee6a758f1.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/神楽坂真冬/微博配图/微博配图/7d633d56e17b8a917f3a0915002aff2c.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/a7dfad62e17a1b4ec7da69ebb4e13656.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/微博美图相册-2020年6月13日/wwWeisa/微博配图/11726643e178fd785b99e7a793c0f5d6.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/1aa2b82ce17ff2dd672cddddbbd5e07d.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/7962d3fce17d9f52ab60dc2f5e5d2ecc.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/19f72387e17c24518137910ca3217f53.webp'\n    },\n    {\n      errno: -9,\n      path: '/我的图片-2020年6月25日/已压缩图片/爱看资源网-2020年6月20日162801/快手网红“沫沫”换衣走光漏点事件，水友纷纷录屏发666~ – 爱看资源网/bc93e55be17c841fd2e1697da0515784.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/4b5ecf8ce1433ecab32ce419b745e3cb.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/水母柒/微博配图/微博配图/70f7e050e143a0bb6c17553065d1ba6a.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/da551ad0e14212fa25349bda375cce97.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/Cheri-小婕x/Cheri-小婕x/微博配图/ecd83577e140f61a4804dde3c11954eb.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/微博美图相册-2020年6月13日/wwWeisa/微博配图/83ca4b1ce14661b43e55e82e656a8165.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月18日/Rainight魈雨/微博配图/微博配图/03976d60e145a36194a3f6fdbc131a5d.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-02-10/手机相册微博图片图片合集-20200210/手机相册-微博图片+写真+cosplay+美图+截屏+相机-合集-2020-02-10/2020年2月9日/图片webp压缩/ 贝儿酱Miki+嶋葵+Kitaro_绮太郎+歌罢海西流-20200203/334a6417e14481f95bbacc5706b61eb0.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/52b76186e14b3a18e3a03bef16131d2c.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/微博美图相册-2020年6月13日/wwWeisa/微博配图/2b48154be14bcd40bd29df51ed2d69ce.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/水母柒/微博配图/微博配图/ac1f1472e14acd67718747f6a854b82c.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-02-10/微博美图合集-2020-02-15+2020-02-14/图片压缩输出/微博美图合集-2020-02-14/咕咕板面/微博配图/5c896037e149038f77275b393c89ac1c.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/32ee73ade149f0a40d465dc3f721850d.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/神楽坂真冬/微博配图/微博配图/223c1d13e148d000833e7928915cca5d.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/神楽坂真冬/微博配图/微博配图/c984a9d1e148b4c457666b9df0c0c096.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/神楽坂真冬/微博配图/微博配图/29f156eee1534fbb854b84d18c8b0e51.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/7e96c06ae1525d2846dc9cf56c01c06e.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/神楽坂真冬/微博配图/微博配图/e1c4ce3fe1521242c91a5749f347fa44.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-02-10/微博美图合集-2020-02-15+2020-02-14/图片压缩输出/微博美图合集-2020-02-14/咕咕板面/微博配图/8550069de151689c9fc80aeb650db923.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/bee11784e1504585b8e474299976b7d4.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/d854afa8e157484d872c4e0a021b1068.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/3977bccae157d740bb41ebbbd217ef3b.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/水母柒/微博配图/微博配图/ba6ea1e4e157b0805bf9873ad1e40dc4.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/6dd083ede15607ccbcbb9a745e038f9f.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/微博美图相册-2020年6月13日/wwWeisa/微博配图/19062e54e15424767782b26ecc2fba14.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/878b46c6e15b52829286a5ca00963fec.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/adcac7c2e15b61bd510b31f380ae6725.webp'\n    },\n    {\n      errno: -9,\n      path: '/我的图片-2020年6月25日/已压缩图片/爱看资源网-2020年6月20日162801/斗鱼ASMR四大女主播之一@小女巫露娜，邻家女孩的那种哦！ – 爱看资源网/10e4c549e15b0eb48c51a5c1fb2f632d.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月18日/Rainight魈雨/微博配图/微博配图/a1d55b59e15bab32a3cc5b7ce1468bf9.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/285dfb74e15aa8ca6629de6537f3f932.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/0508e9b9e15938708150cd54a8b4cad9.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/b9ad1ca9e15ebaca4f391576eef2c533.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/24d7a0a0e15dc3b206f1cc3b50b3893e.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/神楽坂真冬/微博配图/微博配图/3f5f8ab8e15c43923ab9c66383b8df4f.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/632adab7e15c6f4a50f551e94451e8ae.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/366d7a59e15c88b603c419380c630630.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/7277ea5be1a37830fe60f46882c8b01b.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月18日/Rainight魈雨/微博配图/微博配图/6ab815d3e1a3026c7c19d4128e48a55e.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-02-10/微博美图合集-2020-02-15+2020-02-14/图片压缩输出/微博美图合集-2020-02-14/咕咕板面/微博配图/fd397c52e1a3b3b2035aacbb32469e1b.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-02-10/手机相册微博图片图片合集-20200210/手机相册-微博图片+写真+cosplay+美图+截屏+相机-合集-2020-02-10/2020年2月9日/图片webp压缩/ 贝儿酱Miki+嶋葵+Kitaro_绮太郎+歌罢海西流-20200203/d4350825e1a274d08025a7914816a1ff.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/9d56afe4e1a10222718246c4280fb8bb.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/白白白白火华/微博配图/微博配图/fcfb5f8de1a0fc63d731fd069622ca4d.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月13日/水母柒/微博配图/微博配图/61cfcaf0e1a78d73ddc6eb97db345f4c.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/52cbd85de1a6e909b6a0415b250adcce.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/7f1a56ebe1a5ab91018c20817cfa5025.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/3fbf0385e1abcfad9167e6c0ba6a27d4.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/微博美图相册-2020年6月13日/wwWeisa/微博配图/c76f26c7e1af56341b44a9892a7a5c60.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/c0c1894de1ae1ae7b258c5a05fb8b50c.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/a59f9832e1adc3b8d1ac1d32c3b4d9c8.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/a5e11745e1adfca0f887c8d5a814c919.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/8965f728e1ac024a963c53c7f3ce41ea.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月18日/Rainight魈雨/微博配图/微博配图/4cbbc590e1ac8677c10c6b11425ff1a2.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/8e3bb179e1b36d5f98de6df4284f3c8a.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/6aa47b17e1b55474a522cbe15a445234.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/长图切割压缩-2020年6月19日/微博美图相册-2020年6月13日/少女相册/微博配图/200a3592e1b4e19fc6cc0a788e737fee.webp'\n    },\n    {\n      errno: -9,\n      path: '/!我的图片-2020-06-19/微博美图相册-2020年6月18日/Rainight魈雨/微博配图/微博配图/189df61ee1b498fa4638ee4316a0f7dd.webp'\n    },\n    ... 100 more items\n  ],\n  request_id: 4212658712952001000\n} */\n\n// async function slicedelete(filestoremove: string[]) {\n//     let oprearesults;\n//     if (listlimit < filestoremove.length) {\n//         oprearesults = (\n//             await Promise.all(\n//                 slicearray(filestoremove, listlimit).map(list => {\n//                     return fetchdelete(list);\n//                 })\n//             )\n//         ).flat();\n//     } else {\n//         oprearesults = await fetchdelete(filestoremove);\n//     }\n//     console.log(oprearesults);\n//     const newfiles = oprearesults\n//         .filter(o => o?.errno === 111)\n//         .map(o => o?.path);\n//     /* 把删除失败的文件再次删除 */\n\n//     if (newfiles.length) {\n//         /* 延时10秒 */\n\n//         console.log(\"删除失败的文件,10秒后再次尝试删除\", newfiles);\n//         await new Promise(r => setTimeout(r, 10000));\n//         await deletefiles(newfiles);\n//     }\n// }\n// 删除失败的代码是111,但是也可能删除成功\n// {\n//     \"errno\": 111,\n//     \"path\": \"/!我的图片-20190604/微博美图暴力切割-2020-01-05 225127/微博美图cosplay-暴力切割图片-2020-01-05 225127-8(2).rar_20200108075529/8/dc26db61b2faab81d1c5f5734fc3a97d.webp\"\n//   },\n// /*\n// 删除成功的代码是0\n// {\n//     \"errno\": 0,\n//     \"path\": \"/!我的图片-20190604/微博美图合集-20191229/半次元cosplay频道-20191229-5.rar_20200108075443/5/452699b2cfe50d35ee2884ba81ed3dcb.webp\"\n//   },\n\n//   */\n/* 错误码-9是文件不存在,\n错误码31034是服务器拒绝服务\n*/\n/* {\"errno\":-9,\"request_id\":1320659711141136779} */\n// {\n//   errno: 0,\n//   info: [],\n//   request_id: 1320023046338866700,\n//   taskid: 823150949751162\n// }\n// /* {\n//   errno: 3,\n//   info: [],\n//   request_id: 1319996614583890200,\n//   num_limit: 2000\n// } */\n// POST /api/filemanager?opera=delete&async=2&onnest=fail&channel=chunlei&web=1&app_id=250528&bdstoken=dd1601843e05e55609ed49d51dabba42&logid=MTU4MjcxMzgwODE4MjAuODAwNjQzMDEzMzE1OTA1NQ==&clienttype=0 HTTP/1.1\n// Host: pan.baidu.com\n// Connection: keep-alive\n// Content-Length: 91\n// Accept: application/json, text/javascript, */*; q=0.01\n// X-Requested-With: XMLHttpRequest\n// User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.26 Safari/537.36 Edg/81.0.416.16\n// Content-Type: application/x-www-form-urlencoded; charset=UTF-8\n// Origin: https://pan.baidu.com\n// Sec-Fetch-Site: same-origin\n// Sec-Fetch-Mode: cors\n// Sec-Fetch-Dest: empty\n// Referer: https://pan.baidu.com/disk/home?\n// Accept-Encoding: gzip, deflate, br\n// Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\n// Cookie: BAIDUID=FB4E6D238362ED1ED4E544B9850BEDC0:FG=1; BIDUPSID=FB4E6D238362ED1ED4E544B9850BEDC0; PSTM=1549849081; PANWEB=1; BDUSS=XBzT1B4MVBGVlU2Sjc5d1lKb34zSmx5VnpQTHlZN09OcFV0Q0h2b1V1YW5XeVZlSVFBQUFBJCQAAAAAAAAAAAEAAADPRYIEbWFzeDIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKfO~V2nzv1dY; STOKEN=e8edfa007b1d000fb1531ec76617ec0b95b615575fbacc337788e78925bfcd4f; SCRC=72ccb728ee6dacf2ba5938fd8d1351ca; cflag=13%3A3; Hm_lvt_7a3960b6f067eb0085b7f96ff5e660b0=1582549545,1582694989,1582711563,1582713642; Hm_lpvt_7a3960b6f067eb0085b7f96ff5e660b0=1582713642; PANPSC=6576180501642569420%3AKkwrx6t0uHDoTFmRfJVxoMJKt428qvGu%2B%2FtD9xp6N5gr2wqYbSNJzAjY5VzUlGl4zAVEAOjn0RrKGWKyBagKrmlUQ2zB5GaPDtTCc6ZqWjGu2cUHmw770eVcjWJ40Swp0v29HoOyBxO7W09FU%2BvrLt8NRd7EA5d%2B2fNZfjs7wBY%2FcoIBUQpA2juoAeCl9TBG\n\n// fetch(\"https://pan.baidu.com/api/filemanager?opera=delete&async=2&onnest=fail&channel=chunlei&web=1&app_id=250528&bdstoken=dd1601843e05e55609ed49d51dabba42&logid=MTU4MjcxMzgwODE4MjAuODAwNjQzMDEzMzE1OTA1NQ==&clienttype=0\", {\n//   \"headers\": {\n//     \"accept\": \"application/json, text/javascript, */*; q=0.01\",\n//     \"accept-language\": \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n//     \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n//     \"sec-fetch-dest\": \"empty\",\n//     \"sec-fetch-mode\": \"cors\",\n//     \"sec-fetch-site\": \"same-origin\",\n//     \"x-requested-with\": \"XMLHttpRequest\",\n//     \"cookie\": \"BAIDUID=FB4E6D238362ED1ED4E544B9850BEDC0:FG=1; BIDUPSID=FB4E6D238362ED1ED4E544B9850BEDC0; PSTM=1549849081; PANWEB=1; BDUSS=XBzT1B4MVBGVlU2Sjc5d1lKb34zSmx5VnpQTHlZN09OcFV0Q0h2b1V1YW5XeVZlSVFBQUFBJCQAAAAAAAAAAAEAAADPRYIEbWFzeDIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKfO~V2nzv1dY; STOKEN=e8edfa007b1d000fb1531ec76617ec0b95b615575fbacc337788e78925bfcd4f; SCRC=72ccb728ee6dacf2ba5938fd8d1351ca; cflag=13%3A3; Hm_lvt_7a3960b6f067eb0085b7f96ff5e660b0=1582549545,1582694989,1582711563,1582713642; Hm_lpvt_7a3960b6f067eb0085b7f96ff5e660b0=1582713642; PANPSC=6576180501642569420%3AKkwrx6t0uHDoTFmRfJVxoMJKt428qvGu%2B%2FtD9xp6N5gr2wqYbSNJzAjY5VzUlGl4zAVEAOjn0RrKGWKyBagKrmlUQ2zB5GaPDtTCc6ZqWjGu2cUHmw770eVcjWJ40Swp0v29HoOyBxO7W09FU%2BvrLt8NRd7EA5d%2B2fNZfjs7wBY%2FcoIBUQpA2juoAeCl9TBG\"\n//   },\n//   \"referrer\": \"https://pan.baidu.com/disk/home?\",\n//   \"referrerPolicy\": \"no-referrer-when-downgrade\",\n//   \"body\": \"filelist=%5B%22%2F%E7%AE%A1%E7%90%86%E5%91%98%E5%8F%96%E5%BE%97%E6%9D%83%E9%99%90.reg%22%5D\",\n//   \"method\": \"POST\",\n//   \"mode\": \"cors\"\n// });\n\n// fetch(\"https://pan.baidu.com/api/filemanager?opera=delete&async=2&onnest=fail&channel=chunlei&web=1&app_id=250528&bdstoken=dd1601843e05e55609ed49d51dabba42&logid=MTU4MjcxNDEzNTI2NTAuMjEzMzc5MDc5ODYxNjIzNTI=&clienttype=0\", {\n//   \"headers\": {\n//     \"accept\": \"application/json, text/javascript, */*; q=0.01\",\n//     \"accept-language\": \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n//     \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n//     \"sec-fetch-dest\": \"empty\",\n//     \"sec-fetch-mode\": \"cors\",\n//     \"sec-fetch-site\": \"same-origin\",\n//     \"x-requested-with\": \"XMLHttpRequest\",\n//     \"cookie\": \"BAIDUID=FB4E6D238362ED1ED4E544B9850BEDC0:FG=1; BIDUPSID=FB4E6D238362ED1ED4E544B9850BEDC0; PSTM=1549849081; PANWEB=1; BDUSS=XBzT1B4MVBGVlU2Sjc5d1lKb34zSmx5VnpQTHlZN09OcFV0Q0h2b1V1YW5XeVZlSVFBQUFBJCQAAAAAAAAAAAEAAADPRYIEbWFzeDIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKfO~V2nzv1dY; STOKEN=e8edfa007b1d000fb1531ec76617ec0b95b615575fbacc337788e78925bfcd4f; SCRC=72ccb728ee6dacf2ba5938fd8d1351ca; cflag=13%3A3; Hm_lvt_7a3960b6f067eb0085b7f96ff5e660b0=1582549545,1582694989,1582711563,1582713642; Hm_lpvt_7a3960b6f067eb0085b7f96ff5e660b0=1582713642; PANPSC=6576180501642569420%3AKkwrx6t0uHDoTFmRfJVxoMJKt428qvGu%2B%2FtD9xp6N5gr2wqYbSNJzAjY5VzUlGl4zAVEAOjn0RrKGWKyBagKrmlUQ2zB5GaPDtTCc6ZqWjGu2cUHmw770eVcjWJ40Swp0v29HoOyBxO7W09FU%2BvrLt8NRd7EA5d%2B2fNZfjs7wBY%2FcoIBUQpA2juoAeCl9TBG\"\n//   },\n//   \"referrer\": \"https://pan.baidu.com/disk/home?\",\n//   \"referrerPolicy\": \"no-referrer-when-downgrade\",\n//   \"body\": \"filelist=%5B%22%2F%E7%AE%A1%E7%90%86%E5%91%98%E5%8F%96%E5%BE%97%E6%9D%83%E9%99%90.reg%22%2C%22%2FGraphicsMagick-1.3.34-Q16-win64-dll(1).exe%22%5D\",\n//   \"method\": \"POST\",\n//   \"mode\": \"cors\"\n// });\n\n// HTTP/1.1 200 OK\n// Cache-Control: no-cache\n// Connection: keep-alive\n// Content-Encoding: gzip\n// Content-Type: application/json; charset=UTF-8\n// Date: Wed, 26 Feb 2020 10:43:29 GMT\n// Flow-Level: 3\n// Logid: 1316893073357737816\n// Server: nginx\n// Vary: Accept-Encoding\n// X-Powered-By: BaiduCloud\n// Yld: 163971564590141272\n// Yme: ZIGW+Sw8QE4TYysERnb+qnFLvvIAQwrrqANFwSWEmrzoExk/MHc=\n// Content-Length: 95\n\n// {\"errno\":0,\"info\":[],\"request_id\":1316893073357737816,\"taskid\":935102172499812}\n\n// fetch(\"https://pan.baidu.com/api/filemanager?opera=delete&async=1&onnest=fail&channel=chunlei&web=1&app_id=250528&bdstoken=dd1601843e05e55609ed49d51dabba42&logid=MTU4MjcxNDEzNTI2NTAuMjEzMzc5MDc5ODYxNjIzNTI=&clienttype=0\", {\n//   \"headers\": {\n//     \"accept\": \"application/json, text/javascript, */*; q=0.01\",\n//     \"accept-language\": \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n//     \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n//     \"sec-fetch-dest\": \"empty\",\n//     \"sec-fetch-mode\": \"cors\",\n//     \"sec-fetch-site\": \"same-origin\",\n//     \"x-requested-with\": \"XMLHttpRequest\",\n//     \"cookie\": \"BAIDUID=FB4E6D238362ED1ED4E544B9850BEDC0:FG=1; BIDUPSID=FB4E6D238362ED1ED4E544B9850BEDC0; PSTM=1549849081; PANWEB=1; BDUSS=XBzT1B4MVBGVlU2Sjc5d1lKb34zSmx5VnpQTHlZN09OcFV0Q0h2b1V1YW5XeVZlSVFBQUFBJCQAAAAAAAAAAAEAAADPRYIEbWFzeDIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKfO~V2nzv1dY; STOKEN=e8edfa007b1d000fb1531ec76617ec0b95b615575fbacc337788e78925bfcd4f; SCRC=72ccb728ee6dacf2ba5938fd8d1351ca; cflag=13%3A3; Hm_lvt_7a3960b6f067eb0085b7f96ff5e660b0=1582549545,1582694989,1582711563,1582713642; Hm_lpvt_7a3960b6f067eb0085b7f96ff5e660b0=1582713642; PANPSC=6576180501642569420%3AKkwrx6t0uHDoTFmRfJVxoMJKt428qvGu%2B%2FtD9xp6N5gr2wqYbSNJzAjY5VzUlGl4zAVEAOjn0RrKGWKyBagKrmlUQ2zB5GaPDtTCc6ZqWjGu2cUHmw770eVcjWJ40Swp0v29HoOyBxO7W09FU%2BvrLt8NRd7EA5d%2B2fNZfjs7wBY%2FcoIBUQpA2juoAeCl9TBG\"\n//   },\n//   \"referrer\": \"https://pan.baidu.com/disk/home?\",\n//   \"referrerPolicy\": \"no-referrer-when-downgrade\",\n//   \"body\": \"filelist=%5B%22%2F%E7%AE%A1%E7%90%86%E5%91%98%E5%8F%96%E5%BE%97%E6%9D%83%E9%99%90.reg%22%2C%22%2FGraphicsMagick-1.3.34-Q16-win64-dll(1).exe%22%5D\",\n//   \"method\": \"POST\",\n//   \"mode\": \"cors\"\n// });\n\n// {\"errno\":12,\"info\":[{\"errno\":-9,\"path\":\"\\/\\u7ba1\\u7406\\u5458\\u53d6\\u5f97\\u6743\\u9650.reg\"},{\"errno\":-9,\"path\":\"\\/GraphicsMagick-1.3.34-Q16-win64-dll(1).exe\"}],\"request_id\":1317091197014819351}\n\n// response\n\n// {\"errno\":0,\"info\":[],\"request_id\":1343596476256555324,\"taskid\":65546456840230}\n","import { deletefiles } from \"../lib/fetch-delete-files\";\ndeletefiles([\n    \"/管理员取得权限.reg\",\n    \"/引导启动相关工具/管理员取得权限.reg\",\n    \"/装机软件/管理员取得权限.reg\",\n    \"/装机软件/管理员取得权限(1).reg\",\n]).then(() => {\n    console.log(\"删除文件成功\");\n});\nprocess.on(\"unhandledRejection\", (err) => {\n    throw err;\n});\n","import process from \"process\";\nimport { deletefiles } from \"./fetch-delete-files\";\nimport { fetchdeletetaskid } from \"./fetchdeletetaskid\";\nimport { taskquerydeletepoll } from \"./fetch-task-query-delete\";\nimport { taskquerydeleteonce } from \"./taskquerydeleteonce\";\nimport { listonedir } from \"./fetchlistdir\";\nimport { listdirpage } from \"./listdirpage\";\nimport { initPANENV, PANENV } from \"./PANENV\";\nimport { PANDIR } from \"./schemadir\";\nimport { PANFILE } from \"./schemafile\";\nexport { PANDIR, PANFILE };\nexport { listonedir, deletefiles };\nexport { initPANENV, PANENV };\nexport { listdirpage };\nexport { taskquerydeleteonce };\nexport { taskquerydeletepoll };\nprocess.on(\"unhandledRejection\", (err) => {\n    throw err;\n});\nexport { fetchdeletetaskid };\n","import {\n    taskquerydeleteonce,\n    fetchdeletetaskid,\n    taskquerydeletepoll,\n} from \"../lib/index\";\nfetchdeletetaskid([\"/sssssssssssssssssss/notfound\", \"/testssss/notfound\"])\n    .then((taskid) => {\n        console.log(\"taskid\", taskid);\n        if (taskid) {\n            taskquerydeletepoll(taskid);\n            return taskquerydeleteonce(taskid);\n        }\n        return;\n    })\n    .then(console.log);\nprocess.on(\"unhandledRejection\", (err) => {\n    throw err;\n});\n","import { gethomehtmlandupdatecookie } from \"../lib/gethomehtmlandupdatecookie\";\nconst htmldata = gethomehtmlandupdatecookie();\nhtmldata.then((html) => console.log(html.slice(0, 10000)));\nprocess.on(\"unhandledRejection\", (err) => {\n    throw err;\n});\n"],"names":["datadirname","path","join","os","homedir","bdstokenfile","resolve","jsonfile","d","btoa","r","String","fromCharCode","a","e","length","t","charCodeAt","o","c","Math","random","replace","generatelogid","Date","getTime","fetchlimiter","currentlimiter","agent","https","Agent","keepAlive","globalAgent","limitedfetch","asyncwrap","url","opt","Object","assign","startsWith","undefined","method","body","console","log","onrequest","fetch","async","fetchresjson","response","ok","Error","status","statusText","resbody","json","data","assert","errno","error","onresponse","homeurl","objtostrcookie","panobj","entries","map","key","value","cookie","serialize","gethomehtmlandupdatecookie","fsextra","existsSync","coostr","readJSON","req","headers","Connection","Host","accept","Referer","setcookie","get","cooobj","split","s","flat","forEach","coo","parse","outputcoo","Reflect","deleteProperty","writeJSON","spaces","savecookies","text","cacheenv","result","rejecet","reason","initPANENV","Promise","res","rej","bdstoken","readFile","getbdstoken","panenv","logid","reject","process","on","err","Array","fill","then","fatalerrorcheck","JSON","stringify","exit","response_error_handler","urlhref","isArray","listdirpage","dir","page","params","order","desc","showempty","web","num","numlimit","channel","app_id","clienttype","listapi","URL","listurl","search","URLSearchParams","listdata","list","setTimeout","listonedir","alldata","datalist","push","taskquerydeleteonce","taskid","operationurl","Accept","Origin","Cookie","progress","taskquerydeletepoll","fetchdeletetaskid","filestoremove","opera","onnest","encodeURIComponent","info","restfilestodel","Set","file","filepath","delete","filelist","from","slicearray","count","i","slice","deletetaskquerypoll","deletefiles","rawfiles","sliced","filedirs","f","posix","dirname","filepool","all","filter","isdir","includes","excludenotexistfiles","slicedelete","html"],"mappings":"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"}