{"version":3,"file":"index.cjs","sources":["../lib/errno.js","../lib/fatalerrorcheck.js","../lib/limitfetch.js","../lib/files.js","../lib/generatelogid.js","../lib/init.js","../lib/objtostrcookie.js","../lib/gethomehtmlandupdatecookie.js","../lib/savecookies.js","../lib/PANENV.js","../lib/response-error-handler.js","../lib/taskquerydeleteonce.js","../lib/fetch-task-query-delete.js","../lib/listdirpage.js","../lib/fetchlistdir.js","../lib/fetchdeletetaskid.js","../lib/fetch-delete-files.js","../lib/index.ts"],"sourcesContent":["var a = \"//yun.baidu.com/buy/center?tag=8&from=\" + \"disk-home\";\nvar d = \"购买容量\";\nvar t =\n    '你的空间不足了哟，赶紧<a target=\"_blank\" href=\"' + a + '\">' + d + \"</a>吧\";\nexport default {\n    0: \"成功\",\n    \"-1\": \"用户名和密码验证失败\",\n    \"-2\": \"备用\",\n    \"-3\": \"用户未激活（调用init接口）\",\n    \"-4\": \"COOKIE中未找到host_key&user_key（或BDUSS）\",\n    \"-5\": \"host_key和user_key无效\",\n    \"-6\": '登录失败，请重新<a href=\"javascript:window.location.reload();\">登录</a>',\n    \"-7\": \"文件或目录名错误或无权访问\",\n    \"-8\": \"该目录下已存在此文件\",\n    \"-9\": \"文件被所有者删除，操作失败\",\n    \"-10\": t,\n    \"-11\": \"父目录不存在\",\n    \"-12\": \"设备尚未注册\",\n    \"-13\": \"设备已经被绑定\",\n    \"-14\": \"帐号已经初始化\",\n    \"-19\": \"请输入验证码\",\n    \"-21\": \"预置文件无法进行相关操作\",\n    \"-22\": \"被分享的文件无法重命名，移动等操作\",\n    \"-23\": \"数据库操作失败，请联系netdisk管理员\",\n    \"-24\": \"要取消的文件列表中含有不允许取消public的文件。\",\n    \"-25\": \"非公测用户\",\n    \"-26\": \"邀请码失效\",\n    \"-32\": t,\n    \"-102\": \"云冲印文件7日内无法删除\",\n    1: \"服务器错误 \",\n    2: \"接口请求错误，请稍候重试\",\n    3: \"一次操作文件不可超过100个\",\n    4: \"新文件名错误\",\n    5: \"目标目录非法\",\n    6: \"备用\",\n    7: \"NS非法或无权访问\",\n    8: \"ID非法或无权访问\",\n    9: \"申请key失败\",\n    10: \"创建文件的superfile失败\",\n    11: \"user_id(或user_name)非法或不存在\",\n    12: \"部分文件已存在于目标文件夹中\",\n    13: \"此目录无法共享\",\n    14: \"系统错误\",\n    15: \"操作失败\",\n    102: \"无权限操作该目录\",\n    103: \"提取码错误\",\n    104: \"验证cookie无效\",\n    111: \"当前还有未完成的任务，需完成后才能操作\",\n    112: '页面已过期，请<a href=\"javascript:window.location.reload();\">刷新</a>后重试',\n    121: \"网盘文件过多，请删至500万个以内再试\",\n    132: \"删除文件需要验证您的身份\",\n    141: \"内部错误\",\n    142: \"您已被移出当前共享目录，无法继续操作\",\n    201: \"系统错误\",\n    202: \"系统错误\",\n    203: \"系统错误\",\n    204: \"系统错误\",\n    205: \"系统错误\",\n    301: \"其他请求出错\",\n    501: \"获取的LIST格式非法\",\n    618: \"请求curl返回失败\",\n    619: \"pcs返回错误码\",\n    600: \"json解析出错\",\n    601: \"exception抛出异常\",\n    617: \"getFilelist其他错误\",\n    211: \"无权操作或被封禁\",\n    404: \"秒传md5不匹配 rapidupload 错误码\",\n    406: \"秒传创建文件失败 rapidupload 错误码\",\n    407: \"fileModify接口返回错误，未返回requestid rapidupload 错误码\",\n    1024: \"云冲印购物车文件15日内无法删除\",\n    31080: \"我们的服务器出错了，稍候试试吧\",\n    31021: \"网络连接失败，请检查网络或稍候再试\",\n    31075: \"一次支持操作999个，减点试试吧\",\n    31116: '你的空间不足了哟，赶紧<a href=\"//yun.baidu.com/buy/center?tag=2&from=multi-file\">购买空间</a>吧',\n    31401: \"移动后，所选文件将被取消共享，原成员将无法查看，是否继续？\",\n    31034: \"操作过于频繁，请稍后再试\",\n    36009: \"用户空间不足\",\n    36010: \"文件不存在\",\n    36012: \"操作超时，请重试\",\n    36013: \"同时下载的任务过多，不能下载\",\n    36014: \"存储路径已使用\",\n    36016: \"任务已删除\",\n    36017: \"任务已完成\",\n    36018: \"解析失败，种子文件损坏\",\n    36019: \"任务正在处理中\",\n    36020: \"任务地址不存在\",\n    36021: \"普通用户最多同时下载1个任务哦！马上开通离线下载套餐，立即下载更多！\",\n    36022: \"同时下载的任务过多，不能下载\",\n    36023: \"普通用户每月只能离线下载5个任务哦！马上开通离线下载套餐，立即下载更多！\",\n    36024: \"本月下载数已超限制\",\n    36025: \"分享链接已失效\",\n    36026: \"链接格式有误\",\n    36027: \"链接格式有误\",\n    36028: \"暂时无法找到相关种子信息\",\n    36031: \"网络繁忙，请稍候再试\",\n    36032: \"离线文件因含有违规内容被系统屏蔽无法下载\",\n    9000: \"请不要申诉正常文件！\",\n    9001: \"服务器开小差，请稍后重试\",\n    9002: \"申诉频率太快，请稍后再试\",\n    9100: '你的帐号存在违规行为，已被冻结，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    9200: '你的帐号存在违规行为，已被冻结，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    9300: '你的帐号存在违规行为，该功能暂被冻结，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    9400: '你的帐号异常，需验证后才能使用该功能，<a href=\"/disk/appeal\" target=\"_blank\">立即验证</a>',\n    9500: '你的帐号存在安全风险，已进入保护模式，请修改密码后使用，<a href=\"/disk/appeal\" target=\"_blank\">查看详情</a>',\n    10013: \"当前还有未完成的任务，完成后才能操作\",\n    10014: \"未检测到可导入证件\",\n    10015: \"任务创建失败，请稍后重试\",\n    10016: \"抱歉，容量未领取成功，请重新添加证件领取\",\n    18201: \"创建共享目录失败： 有已共享的子目录\",\n    18202: \"创建共享目录失败： 有已共享的父目录\",\n    18203: \"创建共享目录失败： 超过最大创建共享目录限制\",\n    18204: \"超过最大接收共享目录限制\",\n    18205: \"共享目录群组已达上限\",\n    18207: \"为成员设置备注错误\",\n    18208: \"您已被移出该共享目录\",\n    18209: \"邀请链接失效\",\n    18210: \"共享目录不存在\",\n    18211: \"邀请链接已过期\",\n    18212: \"该目录已经被共享\",\n    18214: \"不能邀请目录拥有者\",\n    18215: \"您已加入该共享文件夹\",\n    18220: \"该共享目录目录已被冻结\",\n    18221: \"文件夹名称因含有敏感文字，无法共享给他人\",\n    18222: \"文件夹中因含有非法违规内容，无法共享给他人\",\n    10019: \"格式有误\",\n};\n","import 错误码表 from \"./errno.js\";\nfunction fatalerrorcheck(data) {\n    if (data?.errno === -6) {\n        const e = new Error(\n            \"response data error \\n\" +\n                JSON.stringify(data) +\n                \"\\n\" +\n                Reflect.get(错误码表, data?.errno)\n        );\n        console.error(e);\n        process.exit(1);\n    }\n}\nexport { fatalerrorcheck };\n","import currentlimiter from \"@masx200/async-task-current-limiter\";\nimport https from \"https\";\nimport fetch from \"node-fetch\";\nimport assert from \"assert\";\nconst fetchlimiter = currentlimiter(15);\nconst agent = new https.Agent({\n    keepAlive: true,\n});\nhttps.globalAgent = agent;\nconst customfetch = function (url, opt = {}) {\n    opt = Object.assign(\n        { agent: url.startsWith(\"https:\") ? agent : undefined },\n        opt\n    );\n    onrequest(url, opt);\n    return fetch(url, opt);\n};\nconst limitedfetch = fetchlimiter.asyncwrap(customfetch);\nexport { limitedfetch as fetch };\nfunction onrequest(url, opt = {}) {\n    const { method = \"GET\", body } = opt;\n    console.log(\"request\", method, url, body);\n}\nexport async function fetchresjson(url, opt = {}) {\n    const method = opt.method || \"GET\";\n    const response = await limitedfetch(url, opt);\n    if (!response.ok) {\n        throw Error(\n            \"fetch failed \\n\" +\n                \" \" +\n                method +\n                \" \" +\n                url +\n                \" \\n\" +\n                response.status +\n                \" \" +\n                response.statusText\n        );\n    }\n    const resbody = await response.json();\n    onresponse(resbody);\n    return resbody;\n}\nfunction onresponse(data) {\n    assert(data && typeof data === \"object\");\n    const errno = data?.errno;\n    if (errno !== 0) {\n        console.error(\"response data error\", data);\n    }\n}\n","import os from \"os\";\nimport path from \"path\";\nconst datadirname = path.join(os.homedir(), \"baidupan\", \"./userdata\");\nconst bdstokenfile = path.resolve(datadirname, \"./bdstoken.txt\");\nconst jsonfile = path.resolve(datadirname, \"./cookies.json\");\nexport { jsonfile, bdstokenfile };\n","import btoa from \"btoa\";\nconst d = btoa;\nconst r = String.fromCharCode;\nconst a = function (e) {\n    if (e.length < 2) {\n        var t = e.charCodeAt(0);\n        return 128 > t\n            ? e\n            : 2048 > t\n            ? r(192 | (t >>> 6)) + r(128 | (63 & t))\n            : r(224 | ((t >>> 12) & 15)) +\n              r(128 | ((t >>> 6) & 63)) +\n              r(128 | (63 & t));\n    } else {\n        let t =\n            65536 +\n            1024 * (e.charCodeAt(0) - 55296) +\n            (e.charCodeAt(1) - 56320);\n        return (\n            r(240 | ((t >>> 18) & 7)) +\n            r(128 | ((t >>> 12) & 63)) +\n            r(128 | ((t >>> 6) & 63)) +\n            r(128 | (63 & t))\n        );\n    }\n};\nconst o = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\nconst l = function () {\n    return d(c(new Date().getTime()));\n};\nconst c = function (e) {\n    return (String(e) + \"\" + Math.random()).replace(o, a);\n};\nexport function generatelogid() {\n    return l();\n}\n","import fsextra from \"fs-extra\";\nimport { bdstokenfile } from \"./files.js\";\nexport async function getbdstoken() {\n    return String(await fsextra.readFile(bdstokenfile));\n}\nexport const homeurl = `https://pan.baidu.com/disk/home`;\n","import cookie from \"cookie\";\nexport function objtostrcookie(panobj) {\n    return Object.entries(panobj)\n        .map(([key, value]) => {\n            return cookie.serialize(key, String(value));\n        })\n        .join(\";\");\n}\n","import fsextra from \"fs-extra\";\nimport { jsonfile } from \"./files.js\";\nimport { fetch } from \"./limitfetch.js\";\nimport { homeurl } from \"./init.js\";\nimport { objtostrcookie } from \"./objtostrcookie.js\";\nimport { savecookies } from \"./savecookies.js\";\nexport async function gethomehtmlandupdatecookie() {\n    if (!fsextra.existsSync(jsonfile)) {\n        throw Error(\"没有找到cookie文件,请先登陆网盘,并保存 cookie\");\n    }\n    const panobj = await fsextra.readJSON(jsonfile);\n    const coostr = objtostrcookie(panobj);\n    const req = await fetch(homeurl, {\n        headers: {\n            \"Accept-Encoding\": ` gzip, deflate, br`,\n            \"User-Agent\": `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.17 Safari/537.36 Edg/81.0.416.12`,\n            Connection: `keep-alive`,\n            Host: `pan.baidu.com`,\n            accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\n            \"accept-language\":\n                \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n            \"cache-control\": \"max-age=0\",\n            \"sec-fetch-dest\": \"document\",\n            \"sec-fetch-mode\": \"navigate\",\n            \"sec-fetch-site\": \"same-origin\",\n            \"sec-fetch-user\": \"?1\",\n            \"upgrade-insecure-requests\": \"1\",\n            cookie: coostr,\n            Referer: \"https://pan.baidu.com/disk/home?\",\n        },\n        body: undefined,\n        method: \"GET\",\n    });\n    if (req.ok) {\n        const setcookie = req.headers.get(\"set-cookie\");\n        if (setcookie) {\n            await savecookies(setcookie);\n        }\n        return req.text();\n    } else {\n        throw Error(\n            \"fetch failed \\n\" +\n                homeurl +\n                \" \\n\" +\n                req.status +\n                \" \" +\n                req.statusText\n        );\n    }\n}\n","import cookie from \"cookie\";\nimport fsextra from \"fs-extra\";\nimport { jsonfile } from \"./files.js\";\nexport async function savecookies(setcookie) {\n    const cooobj = {};\n    setcookie\n        .split(\",\")\n        .map((s) => s.split(\";\"))\n        .flat()\n        .forEach((coo) => Object.assign(cooobj, cookie.parse(coo)));\n    const panobj = await fsextra.readJSON(jsonfile);\n    const outputcoo = { ...panobj, ...cooobj };\n    Reflect.deleteProperty(outputcoo, \"expires\");\n    Reflect.deleteProperty(outputcoo, \"domain\");\n    Reflect.deleteProperty(outputcoo, \"path\");\n    console.log(outputcoo);\n    await fsextra.writeJSON(jsonfile, outputcoo, { spaces: 4 });\n}\n","import fsextra from \"fs-extra\";\nimport { jsonfile } from \"./files.js\";\nimport { generatelogid } from \"./generatelogid.js\";\nimport { gethomehtmlandupdatecookie } from \"./gethomehtmlandupdatecookie.js\";\nimport { getbdstoken } from \"./init.js\";\nimport { objtostrcookie } from \"./objtostrcookie.js\";\nlet cacheenv;\nlet resolve = (result) => {};\nlet rejecet = (reason) => {};\nexport async function initPANENV() {\n    if (cacheenv) {\n        return cacheenv;\n    } else {\n        cacheenv = new Promise((res, rej) => {\n            resolve = res;\n            rejecet = rej;\n        });\n    }\n    try {\n        await gethomehtmlandupdatecookie();\n        const bdstoken = await getbdstoken();\n        const panobj = await fsextra.readJSON(jsonfile);\n        const coostr = objtostrcookie(panobj);\n        const panenv = {\n            logid: generatelogid(),\n            bdstoken: bdstoken,\n            cookie: coostr,\n        };\n        console.log(panenv);\n        resolve(panenv);\n        return panenv;\n    } catch (error) {\n        rejecet(error);\n        return Promise.reject(error);\n    }\n}\n","import 错误码表 from \"./errno.js\";\nimport assert from \"assert\";\nexport function response_error_handler(data, urlhref) {\n    assert(typeof data === \"object\" && data && !Array.isArray(data));\n    const errno = data?.errno;\n    assert(typeof errno === \"number\");\n    if (errno !== 0) {\n        console.error(\"response body error\", data);\n        throw Error(\n            \"response data error \\n\" +\n                urlhref +\n                \" \\n\" +\n                errno +\n                \" \" +\n                Reflect.get(错误码表, errno)\n        );\n    }\n}\n","import { fatalerrorcheck } from \"./fatalerrorcheck.js\";\nimport { operationurl } from \"./fetch-task-query-delete.js\";\nimport { fetchresjson } from \"./limitfetch.js\";\nimport { initPANENV } from \"./PANENV.js\";\nimport { response_error_handler } from \"./response-error-handler.js\";\nexport async function taskquerydeleteonce(taskid) {\n    const panenv = await initPANENV();\n    const params = {\n        taskid: String(taskid),\n        channel: \"chunlei\",\n        web: \"1\",\n        app_id: \"250528\",\n        bdstoken: panenv.bdstoken,\n        logid: panenv.logid,\n        clienttype: \"0\",\n    };\n    try {\n        const listapi = new URL(operationurl);\n        listapi.search = String(new URLSearchParams(params));\n        const urlhref = String(listapi);\n        const body = undefined;\n        const headers = {\n            Host: \"pan.baidu.com\",\n            Connection: \"keep-alive\",\n            Accept: \"application/json, text/javascript, */*; q=0.01\",\n            \"X-Requested-With\": \"XMLHttpRequest\",\n            \"User-Agent\": `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.26 Safari/537.36 Edg/81.0.416.16`,\n            \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            Origin: \"https://pan.baidu.com\",\n            \"Sec-Fetch-Site\": \"same-origin\",\n            \"Sec-Fetch-Mode\": \"cors\",\n            \"Sec-Fetch-Dest\": \"empty\",\n            Referer: \" https://pan.baidu.com/disk/home?\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\":\n                \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n            Cookie: panenv.cookie,\n        };\n        const data = await fetchresjson(urlhref, {\n            method: \"POST\",\n            body,\n            headers,\n        });\n        fatalerrorcheck(data);\n        const status = data?.status;\n        const progress = data?.progress;\n        if (data?.errno === 0 && typeof status === \"string\") {\n            return { status, progress };\n        } else {\n            response_error_handler(data, urlhref);\n            return {};\n        }\n    } catch (e) {\n        console.error(\"查询文件错误,5秒后重试.\");\n        console.error(e);\n        await new Promise((r) => {\n            setTimeout(r, 5000);\n        });\n        return taskquerydeleteonce(taskid);\n    }\n}\n","import { taskquerydeleteonce } from \"./taskquerydeleteonce.js\";\nexport const operationurl = `https://pan.baidu.com/share/taskquery`;\nexport async function taskquerydeletepoll(taskid) {\n    while (true) {\n        const { status, progress } = await taskquerydeleteonce(taskid);\n        console.log(\"查询到任务状态成功\", taskid, status, progress);\n        if (status === \"success\" || status === \"failed\") {\n            return;\n        } else {\n            await new Promise((r) => {\n                setTimeout(r, 5000);\n            });\n        }\n    }\n}\n","import { fatalerrorcheck } from \"./fatalerrorcheck.js\";\nimport { listurl, numlimit } from \"./fetchlistdir.js\";\nimport { fetchresjson } from \"./limitfetch.js\";\nimport { initPANENV } from \"./PANENV.js\";\nimport { response_error_handler } from \"./response-error-handler.js\";\nexport async function listdirpage(dir, page) {\n    const panenv = await initPANENV();\n    const params = {\n        order: \"time\",\n        desc: \"1\",\n        showempty: \"0\",\n        web: \"1\",\n        page: String(page),\n        dir: dir,\n        num: String(numlimit),\n        channel: \"chunlei\",\n        app_id: \"250528\",\n        bdstoken: panenv.bdstoken,\n        logid: panenv.logid,\n        clienttype: \"0\",\n    };\n    const headers = {\n        \"Accept-Encoding\": \"gzip, deflate, br\",\n        Referer: `https://pan.baidu.com/disk/home?`,\n        \"User-Agent\":\n            \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.17 Safari/537.36 Edg/81.0.416.12\",\n        Connection: \"keep-alive\",\n        Host: \"pan.baidu.com\",\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"accept-language\": \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n        cookie: panenv.cookie,\n    };\n    const listapi = new URL(listurl);\n    listapi.search = String(new URLSearchParams(params));\n    const urlhref = String(listapi);\n    try {\n        const data = await fetchresjson(urlhref, {\n            headers: headers,\n            body: undefined,\n            method: \"GET\",\n        });\n        fatalerrorcheck(data);\n        const errno = data?.errno;\n        const listdata = data?.list;\n        if (errno === -9) {\n            return [];\n        }\n        if (\n            typeof errno === \"number\" &&\n            errno === 0 &&\n            Array.isArray(listdata)\n        ) {\n            return listdata;\n        } else {\n            response_error_handler(data, urlhref);\n            return [];\n        }\n    } catch (e) {\n        console.error(\"获取文件列表错误,5秒后重试.\" + dir);\n        console.error(e);\n        await new Promise((r) => {\n            setTimeout(r, 5000);\n        });\n        return listdirpage(dir, page);\n    }\n}\n","import { listdirpage } from \"./listdirpage.js\";\nexport const listurl = `https://pan.baidu.com/api/list`;\nexport const numlimit = 1000;\nexport async function listonedir(dir) {\n    let page = 1;\n    const alldata = [];\n    while (true) {\n        const datalist = await listdirpage(dir, page);\n        alldata.push(...datalist);\n        if (datalist.length < numlimit) {\n            break;\n        }\n        page++;\n    }\n    return alldata;\n}\n","import { fatalerrorcheck } from \"./fatalerrorcheck.js\";\nimport { operationurl } from \"./fetch-delete-files.js\";\nimport { fetchresjson } from \"./limitfetch.js\";\nimport { initPANENV } from \"./PANENV.js\";\nimport { response_error_handler } from \"./response-error-handler.js\";\nexport async function fetchdeletetaskid(filestoremove) {\n    if (!filestoremove.length) {\n        return;\n    }\n    const panenv = await initPANENV();\n    const params = {\n        async: \"2\",\n        opera: \"delete\",\n        onnest: \"fail\",\n        channel: \"chunlei\",\n        web: \"1\",\n        app_id: \"250528\",\n        bdstoken: panenv.bdstoken,\n        logid: panenv.logid,\n        clienttype: \"0\",\n    };\n    try {\n        const listapi = new URL(operationurl);\n        listapi.search = String(new URLSearchParams(params));\n        const urlhref = String(listapi);\n        const body =\n            \"filelist=\" + encodeURIComponent(JSON.stringify(filestoremove));\n        const headers = {\n            Host: \"pan.baidu.com\",\n            Connection: \"keep-alive\",\n            Accept: \"application/json, text/javascript, */*; q=0.01\",\n            \"X-Requested-With\": \"XMLHttpRequest\",\n            \"User-Agent\": `Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.26 Safari/537.36 Edg/81.0.416.16`,\n            \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            Origin: \"https://pan.baidu.com\",\n            \"Sec-Fetch-Site\": \"same-origin\",\n            \"Sec-Fetch-Mode\": \"cors\",\n            \"Sec-Fetch-Dest\": \"empty\",\n            Referer: \" https://pan.baidu.com/disk/home?\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\":\n                \"zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\",\n            Cookie: panenv.cookie,\n        };\n        const data = await fetchresjson(urlhref, {\n            method: \"POST\",\n            body,\n            headers,\n        });\n        fatalerrorcheck(data);\n        const taskid = data?.taskid;\n        const info = data?.info;\n        if (data?.errno === 0 && typeof taskid === \"number\") {\n            return taskid;\n        } else if (data?.errno === 12 && Array.isArray(info)) {\n            const restfilestodel = new Set(filestoremove);\n            for (let file of info) {\n                let filepath = file?.path;\n                let errno = file?.errno;\n                if (errno === -9) {\n                    restfilestodel.delete(filepath);\n                }\n            }\n            const filelist = Array.from(restfilestodel);\n            if (!filelist.length) {\n                return;\n            }\n            return fetchdeletetaskid(filelist);\n        } else {\n            response_error_handler(data, urlhref);\n            return 0;\n        }\n    } catch (e) {\n        console.error(\"删除文件错误,5秒后重试.\");\n        console.error(e);\n        await new Promise((r) => {\n            setTimeout(r, 5000);\n        });\n        return fetchdeletetaskid(filestoremove);\n    }\n}\n","import { posix } from \"path\";\nimport { taskquerydeletepoll } from \"./fetch-task-query-delete.js\";\nimport { listonedir } from \"./fetchlistdir.js\";\nimport { fetchdeletetaskid } from \"./fetchdeletetaskid.js\";\nconst listlimit = 200;\nconst splitlimit = 1600;\nexport async function deletefiles(rawfiles) {\n    if (!rawfiles.length) {\n        return;\n    }\n    if (rawfiles.length > splitlimit) {\n        const sliced = slicearray(rawfiles, splitlimit);\n        for (let filelist of sliced) {\n            await deletefiles(filelist);\n        }\n    }\n    const filestoremove = await excludenotexistfiles(rawfiles);\n    console.log(\"需要删除的文件\", filestoremove);\n    if (filestoremove.length) {\n        await slicedelete(filestoremove);\n    } else {\n        console.log(\"没有需要删除的文件\");\n    }\n}\nexport const operationurl = `https://pan.baidu.com/api/filemanager`;\nfunction slicearray(data, count) {\n    var result = [];\n    for (var i = 0; i < data.length; i += count) {\n        result.push(data.slice(i, i + count));\n    }\n    return result;\n}\nasync function excludenotexistfiles(rawfiles) {\n    const filedirs = Array.from(new Set(rawfiles.map((f) => posix.dirname(f))));\n    console.log(\"获取文件信息\", filedirs);\n    const filepool = (\n        await Promise.all(\n            filedirs.map(async (f) => {\n                return (await listonedir(f))\n                    .filter((o) => !o.isdir)\n                    .map((o) => o.path);\n            })\n        )\n    ).flat();\n    const filestoremove = rawfiles.filter((f) => {\n        return filepool.includes(f);\n    });\n    return filestoremove;\n}\nasync function slicedelete(filestoremove) {\n    if (!filestoremove.length) {\n        return;\n    }\n    const sliced = slicearray(filestoremove, listlimit);\n    for (let filelist of sliced) {\n        await deletetaskquerypoll(filelist);\n    }\n}\nasync function deletetaskquerypoll(filelist) {\n    const taskid = await fetchdeletetaskid(filelist);\n    if (!taskid) {\n        return;\n    }\n    console.log(\"获取到删除的任务id\", taskid);\n    await taskquerydeletepoll(taskid);\n    console.log(\"删除文件成功\", filelist);\n}\n","import process from \"process\";\nimport { deletefiles } from \"./fetch-delete-files.js\";\nimport { fetchdeletetaskid } from \"./fetchdeletetaskid.js\";\nimport { taskquerydeletepoll } from \"./fetch-task-query-delete.js\";\nimport { taskquerydeleteonce } from \"./taskquerydeleteonce.js\";\nimport { listonedir } from \"./fetchlistdir.js\";\nimport { listdirpage } from \"./listdirpage.js\";\nimport { initPANENV, PANENV } from \"./PANENV.js\";\nimport { PANDIR } from \"./schemadir.js\";\nimport { PANFILE } from \"./schemafile.js\";\nexport { PANDIR, PANFILE };\nexport { listonedir, deletefiles };\nexport { initPANENV, PANENV };\nexport { listdirpage };\nexport { taskquerydeleteonce };\nexport { taskquerydeletepoll };\nprocess.on(\"unhandledRejection\", (err) => {\n    throw err;\n});\nexport { fetchdeletetaskid };\n"],"names":["t","fatalerrorcheck","data","errno","e","Error","JSON","stringify","Reflect","get","console","error","process","exit","fetchlimiter","currentlimiter","agent","https","Agent","keepAlive","globalAgent","limitedfetch","asyncwrap","url","opt","Object","assign","startsWith","undefined","method","body","log","onrequest","fetch","async","fetchresjson","response","ok","status","statusText","resbody","json","assert","onresponse","datadirname","path","join","os","homedir","bdstokenfile","resolve","jsonfile","d","btoa","r","String","fromCharCode","a","length","charCodeAt","o","c","Math","random","replace","generatelogid","Date","getTime","homeurl","objtostrcookie","panobj","entries","map","key","value","cookie","serialize","gethomehtmlandupdatecookie","fsextra","existsSync","coostr","readJSON","req","headers","Connection","Host","accept","Referer","setcookie","cooobj","split","s","flat","forEach","coo","parse","outputcoo","deleteProperty","writeJSON","spaces","savecookies","text","cacheenv","result","rejecet","reason","initPANENV","Promise","res","rej","bdstoken","readFile","getbdstoken","panenv","logid","reject","response_error_handler","urlhref","Array","isArray","taskquerydeleteonce","taskid","params","channel","web","app_id","clienttype","listapi","URL","operationurl","search","URLSearchParams","Accept","Origin","Cookie","progress","setTimeout","taskquerydeletepoll","listdirpage","dir","page","order","desc","showempty","num","numlimit","listurl","listdata","list","listonedir","alldata","datalist","push","fetchdeletetaskid","filestoremove","opera","onnest","encodeURIComponent","info","restfilestodel","Set","file","filepath","delete","filelist","from","slicearray","count","i","slice","deletetaskquerypoll","on","err","deletefiles","rawfiles","sliced","filedirs","f","posix","dirname","filepool","all","filter","isdir","includes","excludenotexistfiles","slicedelete"],"mappings":";;;;;;;;;;;;wGAEIA,IACA,sGACW;IACX,GAAG;IACH,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,OAAOA;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAOA;IACP,QAAQ;IACR,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,MAAM;IACN,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,KAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAA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"}